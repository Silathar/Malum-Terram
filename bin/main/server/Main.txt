package me.silathar;

import java.io.File;
import java.util.UUID;

import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.configuration.file.FileConfiguration;
import org.bukkit.configuration.file.YamlConfiguration;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerJoinEvent;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.PlayerInventory;
import org.bukkit.plugin.Plugin;
import org.bukkit.plugin.java.JavaPlugin;

import classes.Marksman;
import classes.Scout;
import classes.Pyromancer;
import net.md_5.bungee.api.ChatColor;

public class Main extends JavaPlugin implements Listener{
	private static Plugin plugin;
	public static Listener listenerClass;
	
	public void onEnable(){
	plugin = this;
        getServer().getConsoleSender().sendMessage(ChatColor.GREEN + "\n\nSavage Loaded\n\n");
        getServer().getPluginManager().registerEvents(new Marksman(), this);
        getServer().getPluginManager().registerEvents(new Scout(), this);
        getServer().getPluginManager().registerEvents(new Pyromancer(), this);
        getServer().getPluginManager().registerEvents(new Pyromancer(), this);
        Bukkit.getPluginManager().registerEvents(this, this);
        
    }

    public void onDisable(){
        getServer().getConsoleSender().sendMessage(ChatColor.RED + "\n\nSavage Disabled\n\n");
    }
    
    @EventHandler
    public void onPlayerJoin(PlayerJoinEvent event) {
    	
        Player player = event.getPlayer();
        String playerName = player.getName();

        player.sendMessage(ChatColor.RED + "Welcome to the server " + playerName + "!");
    }
    
    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {
    	
    	if (cmd.getName().equalsIgnoreCase("class") && sender instanceof Player) {
    		
        	Player player = (Player) sender;
        	
        	player.sendMessage(ChatColor.WHITE + "Your class is " + ChatColor.RED + "Marksman");
        	
        	return true;
    	}
    	
    	
    	if (cmd.getName().equalsIgnoreCase("kit marksman") && sender instanceof Player) {
    		
        	Player player = (Player) sender;
        	PlayerInventory playerInv = player.getInventory();
        	
    		playerInv.addItem(new ItemStack(Material.BOW, 1));
    		playerInv.addItem(new ItemStack(Material.ARROW, 64));
    		playerInv.addItem(new ItemStack(Material.FEATHER, 1));
    		playerInv.addItem(new ItemStack(Material.APPLE, 16));
    		playerInv.addItem(new ItemStack(Material.LEATHER_HELMET, 1));
    		playerInv.addItem(new ItemStack(Material.LEATHER_CHESTPLATE, 1));
    		playerInv.addItem(new ItemStack(Material.LEATHER_LEGGINGS, 1));
    		playerInv.addItem(new ItemStack(Material.LEATHER_BOOTS, 1));
    		player.sendMessage(ChatColor.GOLD + "You got the marksman kit!");
    		
    		return true;
    	}
    	
    	return false;	
    }
    
}
